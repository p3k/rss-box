{"version":3,"file":"main.js","sources":["../src/local.js","../src/urls.js","../src/main.js","../src/polyfill.io.js"],"sourcesContent":["const mode = \"__BUILD_MODE__\";\n\nexport const urls = {};\n\n// Note: better not to use ES6 features here\n\nif (mode === \"prod\") {\n  urls.app = \"https://p3k.org/rss\";\n  urls.proxy = \"https://p3k.org/json/roxy\";\n  urls.referrers = \"https://p3k.org/json/ferris?group=rss-box\";\n  urls.feed = \"https://blog.p3k.org/stories.xml\";\n} else {\n  // urls.feed = urls.app + '/test/sampleRssAtom.xml';\n  // urls.feed = 'http://www.artsjournal.com/artsjournal1/music.xml';\n}\n","import { urls as localUrls } from \"./local\";\n\nexport const baseUrl = \"http://localhost\";\n\nexport const urls = {\n  app: baseUrl + \":8000\",\n  proxy: baseUrl + \":8000/roxy\",\n  referrers: baseUrl + \":8000/ferris?group=rss-box\",\n  feed: \"https://blog.p3k.org/stories.xml\"\n};\n\nObject.keys(localUrls).forEach(key => {\n  if (key in urls) urls[key] = localUrls[key];\n});\n","// This is the entrypoint for embedded box scripts\n// All it does is to once load the framework which does the actual work\n\nimport { urls } from \"./urls\";\nimport { version } from \"../package.json\";\nimport polyfill from \"./polyfill.io\";\n\nconst id = `__rssbox_viewer_${version.replace(/\\D/g, \"_\")}_init__`;\n\nif (!window[id]) {\n  window[id] = true;\n\n  polyfill(() => {\n    const script = document.createElement(\"script\");\n    script.defer = script.async = true;\n    script.src = urls.app + \"/box.js\";\n    document.head.appendChild(script);\n  });\n}\n","let loaded = false;\n\nexport default callback => {\n  if (loaded) return;\n\n  const features = [\n    \"fetch\",\n    \"Object.assign\",\n    \"Promise\",\n    \"String.prototype.padStart\",\n    \"String.prototype.startsWith\",\n    \"Array.prototype.fill\",\n    \"Array.from\"\n  ];\n\n  const script = document.createElement(\"script\");\n  script.src = \"https://cdn.polyfill.io/v3/polyfill.min.js?flags=gated&features=\" + encodeURIComponent(features.join());\n  script.crossOrigin = \"anonymous\";\n  script.onload = callback;\n\n  document.head.appendChild(script);\n};\n"],"names":["const","urls","baseUrl","app","proxy","referrers","feed","Object","keys","localUrls","forEach","key","callback","script","id","replace","window","document","createElement","defer","async","src","head","appendChild","encodeURIComponent","join","crossOrigin","onload"],"mappings":"yBAEOA,IAAMC,EAAO,CAKlBA,IAAW,sBACXA,MAAa,4BACbA,UAAiB,4CACjBA,KAAY,oCCRDC,EAAU,mBAEVD,EAAO,CAClBE,IAAKD,EAAU,QACfE,MAAOF,EAAU,aACjBG,UAAWH,EAAU,6BACrBI,KAAM,oCAGRC,OAAOC,KAAKC,GAAWC,kBAAQC,GACzBA,KAAOV,IAAMA,EAAKU,GAAOF,EAAUE,OCLzCX,ICLeY,EAaPC,EDRFC,EAAK,8BAA2BC,QAAQ,MAAO,eAEhDC,OAAOF,KACVE,OAAOF,IAAM,ECRAF,aDWXZ,IAAMa,EAASI,SAASC,cAAc,UACtCL,EAAOM,MAAQN,EAAOO,OAAQ,EAC9BP,EAAOQ,IAAMpB,EAAKE,IAAM,UACxBc,SAASK,KAAKC,YAAYV,KCDtBA,EAASI,SAASC,cAAc,WAC/BG,IAAM,mEAAqEG,mBAXjE,CACf,QACA,gBACA,UACA,4BACA,8BACA,uBACA,cAI4GC,QAC9GZ,EAAOa,YAAc,YACrBb,EAAOc,OAASf,EAEhBK,SAASK,KAAKC,YAAYV"}