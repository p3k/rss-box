{"version":3,"file":"main.js","sources":["../src/local.js","../src/urls.js","../src/polyfill.io.js","../src/main.js"],"sourcesContent":["const mode = \"__BUILD_MODE__\";\n\nexport const urls = {};\n\n// Note: better not to use ES6 features here\n\nif (mode === \"prod\") {\n  urls.app = \"https://p3k.org/rss\";\n  urls.proxy = \"https://p3k.org/json/roxy\";\n  urls.referrers = \"https://p3k.org/json/ferris?group=rss-box\";\n  urls.feed = \"https://blog.p3k.org/stories.xml\";\n} else {\n  // urls.feed = urls.app + '/test/sampleRssAtom.xml';\n  // urls.feed = 'http://www.artsjournal.com/artsjournal1/music.xml';\n}\n","import { urls as localUrls } from \"./local\";\n\nexport const baseUrl = \"http://localhost\";\n\nexport const urls = {\n  app: baseUrl + \":8000\",\n  proxy: baseUrl + \":8000/roxy\",\n  referrers: baseUrl + \":8000/ferris?group=rss-box\",\n  feed: \"https://blog.p3k.org/stories.xml\"\n};\n\nObject.keys(localUrls).forEach(key => {\n  if (key in urls) urls[key] = localUrls[key];\n});\n","let loaded = false;\n\nexport default callback => {\n  if (loaded) return;\n\n  const features = [\n    \"fetch\",\n    \"Object.assign\",\n    \"Promise\",\n    \"String.prototype.padStart\",\n    \"String.prototype.startsWith\",\n    \"Array.prototype.fill\",\n    \"Array.from\"\n  ];\n\n  const script = document.createElement(\"script\");\n  script.src = \"https://cdn.polyfill.io/v3/polyfill.min.js?flags=gated&features=\" + encodeURIComponent(features.join());\n  script.crossOrigin = \"anonymous\";\n  script.onload = callback;\n\n  document.head.appendChild(script);\n};\n","// This is the entrypoint for embedded box scripts\n// All it does is to once load the framework which does the actual work\n\nimport { urls } from \"./urls\";\nimport { version } from \"../package.json\";\nimport polyfill from \"./polyfill.io\";\n\nconst id = `__rssbox_viewer_${version.replace(/\\D/g, \"_\")}_init__`;\n\nif (!window[id]) {\n  window[id] = true;\n\n  polyfill(() => {\n    const script = document.createElement(\"script\");\n    script.defer = script.async = true;\n    script.src = urls.app + \"/box.js\";\n    document.head.appendChild(script);\n  });\n}\n"],"names":["urls","localUrls"],"mappings":";;;EAEO,MAAMA,MAAI,GAAG,EAAE;;ECAf,MAAM,OAAO,GAAG,kBAAkB,CAAC;AAC1C;EACO,MAAM,IAAI,GAAG;EACpB,EAAE,GAAG,EAAE,OAAO,GAAG,OAAO;EACxB,EAAE,KAAK,EAAE,OAAO,GAAG,YAAY;EAC/B,EAAE,SAAS,EAAE,OAAO,GAAG,4BAA4B;EACnD,EAAE,IAAI,EAAE,kCAAkC;EAC1C,CAAC,CAAC;AACF;EACA,MAAM,CAAC,IAAI,CAACC,MAAS,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI;EACtC,EAAE,IAAI,GAAG,IAAI,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,GAAGA,MAAS,CAAC,GAAG,CAAC,CAAC;EAC9C,CAAC,CAAC;;;;ACXF,iBAAe,QAAQ,IAAI;AAE3B;EACA,EAAE,MAAM,QAAQ,GAAG;EACnB,IAAI,OAAO;EACX,IAAI,eAAe;EACnB,IAAI,SAAS;EACb,IAAI,2BAA2B;EAC/B,IAAI,6BAA6B;EACjC,IAAI,sBAAsB;EAC1B,IAAI,YAAY;EAChB,GAAG,CAAC;AACJ;EACA,EAAE,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;EAClD,EAAE,MAAM,CAAC,GAAG,GAAG,kEAAkE,GAAG,kBAAkB,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,CAAC;EACxH,EAAE,MAAM,CAAC,WAAW,GAAG,WAAW,CAAC;EACnC,EAAE,MAAM,CAAC,MAAM,GAAG,QAAQ,CAAC;AAC3B;EACA,EAAE,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;EACpC,CAAC;;ECrBD;AAMA;EACA,MAAM,EAAE,GAAG,CAAC,gBAAgB,EAAE,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;AACnE;EACA,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE;EACjB,EAAE,MAAM,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;AACpB;EACA,EAAE,QAAQ,CAAC,MAAM;EACjB,IAAI,MAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;EACpD,IAAI,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;EACvC,IAAI,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,SAAS,CAAC;EACtC,IAAI,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;EACtC,GAAG,CAAC,CAAC;EACL;;;;;;"}