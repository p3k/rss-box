{"version":3,"file":"main.js","sources":["../src/local.js","../src/urls.js","../src/polyfill.io.js","../src/main.js"],"sourcesContent":["export const urls = {};\n","import { urls as localUrls } from \"./local\";\n\nexport const baseUrl = \"http://localhost\";\n\nexport const urls = {\n  app: `${baseUrl}:8000`,\n  proxy: `${baseUrl}:8000/roxy`,\n  referrers: `${baseUrl}:8000/ferris?group=rss-box`,\n  feed: \"https://blog.p3k.org/stories.xml\"\n};\n\nObject.keys(localUrls).forEach(key => {\n  if (key in urls) urls[key] = localUrls[key];\n});\n","let loaded = false;\n\nexport default callback => {\n  if (loaded) return;\n\n  const polyfillUrl =\n    \"https://cdn.polyfill.io/v3/polyfill.min.js?version=3.111.0&features=\";\n\n  const features = [\n    \"fetch\",\n    \"Object.assign\",\n    \"Promise\",\n    \"String.prototype.padStart\",\n    \"String.prototype.startsWith\",\n    \"Array.prototype.fill\",\n    \"Array.from\"\n  ];\n\n  const script = document.createElement(\"script\");\n  script.src = `${polyfillUrl}${encodeURIComponent(features.join())}`;\n  script.crossOrigin = \"anonymous\";\n  script.onload = callback;\n  document.head.appendChild(script);\n\n  loaded = true;\n};\n","// This is the entrypoint for embedded box scripts\n// All it does is to once load the framework which does the actual work\n\nimport { urls } from \"./urls\";\nimport { version } from \"../package.json\";\nimport polyfill from \"./polyfill.io\";\n\nconst id = `__rssbox_viewer_${version.replace(/\\D/g, \"_\")}_init__`;\n\nif (!window[id]) {\n  window[id] = true;\n\n  polyfill(() => {\n    // Target modern browsers and IE 11 differently\n    // Source: <https://tanalin.com/en/articles/ie-version-js/>\n    const filename = window.msCrypto ? \"box.js\" : \"box-esm.js\";\n    const script = document.createElement(\"script\");\n    script.async = script.defer = true;\n    script.src = `${urls.app}/${filename}`;\n    document.head.appendChild(script);\n  });\n}\n"],"names":["urls","baseUrl","app","concat","proxy","referrers","feed","Object","keys","localUrls","forEach","key","loaded","id","replace","window","callback","script","document","createElement","src","encodeURIComponent","join","crossOrigin","onload","head","appendChild","polyfill","filename","msCrypto","async","defer"],"mappings":"yBAAO,IAAMA,EAAO,CAAE,ECETC,EAAU,mBAEVD,EAAO,CAClBE,IAAGC,GAAAA,OAAKF,EAAc,SACtBG,MAAKD,GAAAA,OAAKF,EAAmB,cAC7BI,UAASF,GAAAA,OAAKF,EAAmC,8BACjDK,KAAM,oCAGRC,OAAOC,KAAKC,GAAWC,SAAQ,SAAAC,GACzBA,KAAOX,IAAMA,EAAKW,GAAOF,EAAUE,GACzC,QCbIC,GAAS,ECOPC,EAAE,mBAAAV,iBAA8BW,QAAQ,MAAO,KAAa,WAE7DC,OAAOF,KACVE,OAAOF,IAAM,EDRA,SAAAG,GACb,IAAIJ,EAAJ,CAEA,IAaMK,EAASC,SAASC,cAAc,UACtCF,EAAOG,IAAG,GAAAjB,OAbR,wEAayBA,OAAGkB,mBAXb,CACf,QACA,gBACA,UACA,4BACA,8BACA,uBACA,cAIwDC,SAC1DL,EAAOM,YAAc,YACrBN,EAAOO,OAASR,EAChBE,SAASO,KAAKC,YAAYT,GAE1BL,GAAS,CArBG,CAsBb,CCbCe,EAAS,WAGP,IAAMC,EAAWb,OAAOc,SAAW,SAAW,aACxCZ,EAASC,SAASC,cAAc,UACtCF,EAAOa,MAAQb,EAAOc,OAAQ,EAC9Bd,EAAOG,IAAGjB,GAAAA,OAAMH,EAAKE,IAAGC,KAAAA,OAAIyB,GAC5BV,SAASO,KAAKC,YAAYT,EAC5B"}