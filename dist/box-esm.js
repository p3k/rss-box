function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e,n,o,r,i,l,s={exports:{}},c=t(s.exports=(n=[],o=document,r=o.documentElement.doScroll,i="DOMContentLoaded",(l=(r?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState))||o.addEventListener(i,e=function(){for(o.removeEventListener(i,e),l=1;e=n.shift();)e()}),function(t){l?setTimeout(t,0):n.push(t)}));
/*!
  * domready (c) Dustin Diaz 2014 - License MIT
  */function a(){}function u(t){return t()}function d(){return Object.create(null)}function m(t){t.forEach(u)}function f(t){return"function"==typeof t}function h(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function p(t,...e){if(null==t){for(const t of e)t(void 0);return a}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function g(t,e){t.appendChild(e)}function v(t,e,n){const o=function(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;if(e&&e.host)return e;return t.ownerDocument}(t);if(!o.getElementById(e)){const t=w("style");t.id=e,t.textContent=n,function(t,e){g(t.head||t,e),e.sheet}(o,t)}}function y(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function x(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function k(t){return document.createTextNode(t)}function C(){return k(" ")}function E(){return k("")}function N(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function T(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}class B{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(t=!1){this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.is_svg?this.e=$(e.nodeName):this.e=w(11===e.nodeType?"TEMPLATE":e.nodeName),this.t="TEMPLATE"!==e.tagName?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)y(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(b)}}let A;function M(t){A=t}function R(){if(!A)throw new Error("Function called outside component initialization");return A}const _=[],D=[];let O=[];const L=[],P=Promise.resolve();let F=!1;function q(t){O.push(t)}const I=new Set;let U=0;function j(){if(0!==U)return;const t=A;do{try{for(;U<_.length;){const t=_[U];U++,M(t),H(t.$$)}}catch(t){throw _.length=0,U=0,t}for(M(null),_.length=0,U=0;D.length;)D.pop()();for(let t=0;t<O.length;t+=1){const e=O[t];I.has(e)||(I.add(e),e())}O.length=0}while(_.length);for(;L.length;)L.pop()();F=!1,I.clear(),M(t)}function H(t){if(null!==t.fragment){t.update(),m(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const z=new Set;let X;function Q(){X={r:0,c:[],p:X}}function V(){X.r||m(X.c),X=X.p}function W(t,e){t&&t.i&&(z.delete(t),t.i(e))}function Y(t,e,n,o){if(t&&t.o){if(z.has(t))return;z.add(t),X.c.push((()=>{z.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function G(t,e){const n=e.token={};function o(t,o,r,i){if(e.token!==n)return;e.resolved=i;let l=e.ctx;void 0!==r&&(l=l.slice(),l[r]=i);const s=t&&(e.current=t)(l);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(Q(),Y(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),V())})):e.block.d(1),s.c(),W(s,1),s.m(e.mount(),e.anchor),c=!0),e.block=s,e.blocks&&(e.blocks[o]=s),c&&j()}if(!(r=t)||"object"!=typeof r&&"function"!=typeof r||"function"!=typeof r.then){if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}else{const n=R();if(t.then((t=>{M(n),o(e.then,1,e.value,t),M(null)}),(t=>{if(M(n),o(e.catch,2,e.error,t),M(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}var r}function J(t){return void 0!==t?.length?t:Array.from(t)}function K(t){t&&t.c()}function Z(t,e,n){const{fragment:o,after_update:r}=t.$$;o&&o.m(e,n),q((()=>{const e=t.$$.on_mount.map(u).filter(f);t.$$.on_destroy?t.$$.on_destroy.push(...e):m(e),t.$$.on_mount=[]})),r.forEach(q)}function tt(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];O.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),O=e}(n.after_update),m(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function et(t,e){-1===t.$$.dirty[0]&&(_.push(t),F||(F=!0,P.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function nt(t,e,n,o,r,i,l,s=[-1]){const c=A;M(t);const u=t.$$={fragment:null,ctx:[],props:i,update:a,not_equal:r,bound:d(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:d(),dirty:s,skip_bound:!1,root:e.target||c.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return u.ctx&&r(u.ctx[e],u.ctx[e]=i)&&(!u.skip_bound&&u.bound[e]&&u.bound[e](i),f&&et(t,e)),n})):[],u.update(),f=!0,m(u.before_update),u.fragment=!!o&&o(u.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);u.fragment&&u.fragment.l(t),t.forEach(b)}else u.fragment&&u.fragment.c();e.intro&&W(t.$$.fragment),Z(t,e.target,e.anchor),j()}M(c)}class ot{$$=void 0;$$set=void 0;$destroy(){tt(this,1),this.$destroy=a}$on(t,e){if(!f(e))return a;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const rt=[];function it(t,e=a){let n;const o=new Set;function r(e){if(h(t,e)&&(t=e,n)){const e=!rt.length;for(const e of o)e[1](),rt.push(e,t);if(e){for(let t=0;t<rt.length;t+=2)rt[t][0](rt[t+1]);rt.length=0}}}function i(e){r(e(t))}return{set:r,update:i,subscribe:function(l,s=a){const c=[l,s];return o.add(c),1===o.size&&(n=e(r,i)||a),l(t),()=>{o.delete(c),0===o.size&&n&&(n(),n=null)}}}}const lt={},st="http://localhost",ct={app:`${st}:8000`,proxy:`${st}:8000/roxy`,referrers:`${st}:8000/ferris?group=rss-box`,feed:"https://blog.p3k.org/stories.xml"};Object.keys(lt).forEach((t=>{t in ct&&(ct[t]=lt[t])}));const at={loading:!1,compact:!1,maxItems:3,format:"Error",version:"⚡",title:"RSS Box Error",description:"This output was automatically generated to report an error that occurred during a request to the RSS Box Viewer.",image:"",items:[{title:"Oops, something went wrong…",description:"An error occurred while processing the request to the RSS Box Viewer."},{title:"The following error message was returned:",description:"Unknown error"},{title:""}]};function ut(){const t="http://purl.org/dc/elements/1.1/",e=/([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9:]+).*$/,n=function(t,e,n){if(!t||!e)return null;let o="getElementsByTagName";return n&&(o+="NS"),e[o](t,n)[0]},o=function(t){return t?(t.length&&(t=t[0]),t.textContent):""},r=Error("Malformed RSS syntax"),i=function(t,e){const o=n("source",t),r=Array.apply(null,t.getElementsByTagName("enclosure")),i=n("category",t);return o&&(e.source={url:o.getAttribute("url"),title:o.textContent}),e.enclosures=r.map((t=>({url:t.getAttribute("url"),length:t.getAttribute("length"),type:t.getAttribute("type")}))),i&&(e.category={domain:i.getAttribute("domain")||"",content:i.textContent}),e},l=function(t){let n=Date.parse(t);return isNaN(n)&&(n=Date.parse(String(t).replace(e,"$1/$2/$3 $4")),isNaN(n)&&(n=Date.now())),new Date(n)};return{parse:function(e){const s=function(t){if(!t)return;let e;document.implementation.createDocument?e=(new DOMParser).parseFromString(t,"application/xml"):window.ActiveXObject&&(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t));return e}(e);if(!s||n("parsererror",s.documentElement))throw r;const c=s.documentElement,a=c.nodeName;switch(a){case"feed":return function(t){const e={items:[],format:"Atom",version:"1.0"};e.title=o(n("title",t)),e.description=o(n("subtitle",t)),e.image="";const r=n("link:not([self])",t);return r&&(e.link=r.getAttribute("href")),e.date=l(n("updated",t)),Array.apply(null,t.getElementsByTagName("entry")).forEach((t=>{const r={title:o(n("title",t)),description:o(n("summary",t))},i=n("link",t);i&&(r.link=i.getAttribute("href")),e.items.push(r)})),e}(c);case"scriptingNews":return function(t){const e={items:[]},s=n("header",t);if(!s)throw r;e.format="Scripting News",e.version=o(n("scriptingNewsVersion",s)),e.title=o(n("channelTitle",s)),e.description=o(n("channelDescription",s)),e.link=o(n("channelLink",s)),e.date=l(o(n("lastBuildDate",s))||o(n("pubDate",s)));const c=n("imageUrl",s);return c&&(e.image={source:o(c),title:o(n("imageTitle",s)),link:o(n("imageLink",s)),width:o(n("imageWidth",s)),height:o(n("imageHeight",s)),description:o(n("imageCaption",s))}),Array.apply(null,t.getElementsByTagName("item")).forEach((t=>{const r={title:""};r.description=o(n("text",t)).replace(/\n/g," ");const l=n("link",t);if(l){const e=o(n("linetext",l)).replace(/\n/g," ").trim();e&&(r.description=r.description.replace(new RegExp(e),'<a href="'+o(n("url",t))+'">'+e+"</a>")),r.link=o(n("url",l))}i(t,r),e.items.push(r)})),e}(c);default:return function(e,s){const c={items:[]},a=n("channel",e);if(!a)throw r;c.format="RSS",c.version="rdf:RDF"===s?"1.0":e.getAttribute("version"),c.title=o(n("title",a)),c.description=o(n("description",a)),c.link=o(n("link",a));const u=n("image",a);if(c.image=u?{source:o(n("url",u))||u.getAttributeNS("http://www.w3.org/1999/02/22-rdf-syntax-ns#","resource"),title:o(n("title",u)),link:o(n("link",u)),width:o(n("width",u)),height:o(n("height",u)),description:o(n("description",u))}:"","rdf:RDF"===s){const r=a.getElementsByTagNameNS(t,"date");c.date=l(o(r)),c.rights=o(a.getElementsByTagNameNS(t,"creator"));const i=n("textinput",e);c.input=i?{link:o(n("link",i)),description:o(n("description",i)),name:o(n("name",i)),title:o(n("title",i))}:""}else c.date=l(o(n("lastBuildDate",a))||o(n("pubDate",a))),c.rights=o(n("copyright",a));return Array.apply(null,e.getElementsByTagName("item")).forEach((t=>{const e={title:o(n("title",t)),description:o(n("description",t)),link:o(n("link",t))||o(n("guid",t))};if(!e.description){let r=o(n("encoded",t,"content"));r?e.description=r:(r=o(n("encoded",t)),r&&(e.description=r))}i(t,e),c.items.push(e)})),c}(c,a)}}}}var dt={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};const mt=t=>{const{subscribe:e,update:n}=it(t),o=t=>n((e=>(Object.keys(t).forEach((n=>{n in e!=!1&&(e[n]=t[n])})),e)));return{subscribe:e,update:o,set:o}};function ft(t){if(!t)return;const e=this;e.set({loading:!0});const n=new Headers({Accept:["application/rss+xml","application/rdf+xml","application/atom+xml","application/xml;q=0.9","text/xml;q=0.8"].join()});fetch(`${ct.proxy}?url=${encodeURIComponent(t)}`,{headers:n,referrerPolicy:"no-referrer"}).then((t=>{if(t.status>399)throw Error(dt[t.status]);return t.json()})).then((t=>{const n=ut().parse(t.content);n.date||(n.date=new Date(t.headers.date)),e.set({...n,loading:!1})})).catch((n=>{e.set(function(t,e){const n=Object.assign({},at);return n.link=`${ct.app}?url=${t}`,n.items[1].description=e,n.items[2].description=`\n    Most likely, this might have happened because of a non-existent or invalid RSS feed URL.\n    <a href="https://validator.w3.org/feed/check.cgi?url=${t}">Please check</a> and\n    possibly correct your input, then try again.\n  `,n}(t,n)),console.error(n)}))}const ht=t=>{if(!t)return;const e=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),o=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");return`${t.getFullYear()}-${e}-${n}, ${o}:${r}h`},pt=()=>{const t=mt({date:new Date,description:"",format:"",image:"",input:"",items:[],link:"",loading:!1,title:"",version:""});return t.fetch=ft.bind(t),t.formatDate=ht.bind(t),t};pt();const gt=it([]);function vt(t){v(t,"svelte-1o1cw1v","svg.svelte-1o1cw1v{width:1.2em;height:1.2em}polygon.svelte-1o1cw1v{fill:currentcolor;fill-rule:evenodd;clip-rule:evenodd}")}function yt(t){let e,n,o,r;return{c(){e=$("svg"),n=$("g"),o=$("polygon"),r=$("polygon"),N(o,"points","2,2 5,2 5,3 3,3 3,9 9,9 9,7 10,7 10,10 2,10"),N(o,"class","svelte-1o1cw1v"),N(r,"points","6.211,2 10,2 10,5.789 8.579,4.368 6.447,6.5 5.5,5.553 7.632,3.421"),N(r,"class","svelte-1o1cw1v"),N(e,"xmlns","http://www.w3.org/2000/svg"),N(e,"viewBox","0 0 12 12"),N(e,"preserveAspectRatio","xMinYMin"),N(e,"class","svelte-1o1cw1v")},m(t,i){y(t,e,i),g(e,n),g(n,o),g(n,r)},p:a,i:a,o:a,d(t){t&&b(e)}}}gt.fetch=function(){const t=this;fetch(ct.referrers).then((t=>t.json())).then((e=>{const n=e.reduce(((t,e)=>{if(e.url.startsWith("http")&&!e.url.startsWith(ct.app)&&e.url.indexOf("atari-embeds.googleusercontent.com")<0){const n=e.url.replace(/^([^.]*)www\./,"$1"),o=n.split("/")[2];let r=t[o];r?e.hits>r.hits&&(r.url=e.url,r.hits=e.hits):(r={host:o,url:n,hits:e.hits,total:0},t[o]=r,t.push(r)),r.total+=e.hits,r.metadata=e.metadata||{feedUrls:[]}}return t}),[]),o=n.reduce(((t,e)=>t+e.total),0),r=n.map((t=>(t.percentage=t.total/o*100,t)));r.sort(((t,e)=>e.percentage-t.percentage)),t.set(r)}))}.bind(gt),"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class bt extends ot{constructor(t){super(),nt(this,t,null,yt,h,{},vt)}}function xt(t){v(t,"svelte-tv4elv","svg.svelte-tv4elv{width:1em;height:1em}path.svelte-tv4elv{fill:currentcolor}")}function wt(t){let e,n,o;return{c(){e=$("svg"),n=$("g"),o=$("path"),N(o,"d","M 384,192 Q 384,112 328,56 272,0 192,0 112,0 56,56 0,112 0,192 q 0,80 56,136 56,56 136,56 80,0 136,-56 56,-56 56,-136 z M 896,69 Q 898,41 879,21 861,0 832,0 H 697 Q 672,0 654,16.5 636,33 634,58 612,287 449.5,449.5 287,612 58,634 33,636 16.5,654 0,672 0,697 v 135 q 0,29 21,47 17,17 43,17 h 5 Q 229,883 375,815.5 521,748 634,634 748,521 815.5,375 883,229 896,69 z m 512,-2 Q 1410,40 1390,20 1372,0 1344,0 H 1201 Q 1175,0 1156.5,17.5 1138,35 1137,60 1125,275 1036,468.5 947,662 804.5,804.5 662,947 468.5,1036 275,1125 60,1138 35,1139 17.5,1157.5 0,1176 0,1201 v 143 q 0,28 20,46 18,18 44,18 h 3 Q 329,1395 568.5,1288 808,1181 994,994 1181,808 1288,568.5 1395,329 1408,67 z"),N(o,"class","svelte-tv4elv"),N(n,"transform","matrix(1,0,0,-1,212.61017,1346.1695)"),N(e,"xmlns","http://www.w3.org/2000/svg"),N(e,"viewBox","0 -256 1792 1792"),N(e,"preserveAspectRatio","xMinYMin"),N(e,"class","svelte-tv4elv")},m(t,r){y(t,e,r),g(e,n),g(n,o)},p:a,i:a,o:a,d(t){t&&b(e)}}}class $t extends ot{constructor(t){super(),nt(this,t,null,wt,h,{},xt)}}function kt(t){v(t,"svelte-52c227","svg.svelte-52c227{width:1.2em;height:1.2em}path.svelte-52c227{fill:currentcolor}")}function Ct(t){let e,n;return{c(){e=$("svg"),n=$("path"),N(n,"d","m409 531l-5.244 6.733c-.983 1.262-.708 3.511.55 4.497 1.259.986 3.5.71 4.484-.552l5.244-6.733.655-.842c.656-.842.472-2.341-.367-2.998-.839-.658-2.334-.473-2.989.368l-.656.842-3.933 5.05-.656.842c-.328.421-.236 1.17.183 1.499.42.329 1.167.237 1.495-.184l4.589-5.891.839.658-4.589 5.891c-.656.842-2.15 1.026-2.989.368-.839-.658-1.023-2.157-.367-2.998l.656-.842 4.589-5.891c.983-1.262 3.225-1.538 4.484-.552 1.259.986 1.534 3.235.551 4.497l-.656.842-5.244 6.733c-1.311 1.683-4.3 2.051-5.978.736-1.678-1.315-2.045-4.313-.734-5.997l5.244-6.733.839.658"),N(n,"transform","matrix(.84782 0 0 .84521-338.85-445.68)"),N(n,"stroke","none"),N(n,"class","svelte-52c227"),N(e,"xmlns","http://www.w3.org/2000/svg"),N(e,"viewBox","0 0 16 16"),N(e,"preserveAspectRatio","xMinYMin"),N(e,"class","svelte-52c227")},m(t,o){y(t,e,o),g(e,n)},p:a,i:a,o:a,d(t){t&&b(e)}}}class Et extends ot{constructor(t){super(),nt(this,t,null,Ct,h,{},kt)}}function Nt(t){v(t,"svelte-1muynra",".rssbox.svelte-1muynra.svelte-1muynra{box-sizing:border-box;width:100%;border:1px solid #000;font-family:sans-serif;overflow:hidden;border-radius:0;-moz-border-radius:0}.rssbox-icon.svelte-1muynra.svelte-1muynra{float:right;width:1em;margin-left:0.5em}.rssbox-titlebar.svelte-1muynra.svelte-1muynra{padding:0.5em;color:#000;background-color:#add8e6;border-bottom:1px solid #000;font-weight:bold;letter-spacing:0.01em}.rssbox-date.svelte-1muynra.svelte-1muynra{margin-top:0.2em;font-size:0.8em;font-weight:normal}.rssbox-content.svelte-1muynra.svelte-1muynra{height:auto;padding:0.5em;overflow-x:hidden;overflow-y:auto;background-color:#fff;clear:both;-ms-overflow-style:-ms-autohiding-scrollbar}.rssbox-content.svelte-1muynra aside.svelte-1muynra{clear:both;float:right}.rssbox-content.svelte-1muynra aside a.svelte-1muynra{display:block;margin-left:0.5em}.rssbox-image.svelte-1muynra.svelte-1muynra{float:right;margin:0 0 0.5em 0.5em;background-position:left center;background-repeat:no-repeat;background-size:contain}.rssbox-item-title.bold.svelte-1muynra.svelte-1muynra{font-weight:bold}.rssbox-enclosure.svelte-1muynra.svelte-1muynra,.rssbox-source.svelte-1muynra.svelte-1muynra{display:block;width:1em}.rssbox-form.svelte-1muynra.svelte-1muynra{margin-bottom:0.8em}.rssbox-form.svelte-1muynra input.svelte-1muynra{padding:0.5em;background-color:#fff}.rssbox-promo.svelte-1muynra.svelte-1muynra{text-align:right;font-size:0.7em;letter-spacing:0.01em}")}function St(t,e,n){const o=t.slice();return o[8]=e[n],o[10]=n,o}function Tt(t,e,n){const o=t.slice();return o[11]=e[n],o}function Bt(t){let e,n,o,r,i,l,s,c,a,u,d=t[6].title+"",m=t[0].formatDate(t[6].date)+"",f=t[2].showXmlButton&&At(t);return{c(){e=w("div"),f&&f.c(),n=C(),o=w("div"),r=w("a"),i=k(d),s=C(),c=w("div"),a=k(m),N(r,"href",l=t[6].link),T(r,"color",t[2].titleBarTextColor),N(c,"class","rssbox-date svelte-1muynra"),N(e,"class","rssbox-titlebar svelte-1muynra"),T(e,"color",t[2].titleBarTextColor),T(e,"background-color",t[2].titleBarColor),T(e,"border-bottom-color",t[2].frameColor)},m(t,l){y(t,e,l),f&&f.m(e,null),g(e,n),g(e,o),g(o,r),g(r,i),g(e,s),g(e,c),g(c,a),u=!0},p(t,o){t[2].showXmlButton?f?(f.p(t,o),4&o&&W(f,1)):(f=At(t),f.c(),W(f,1),f.m(e,n)):f&&(Q(),Y(f,1,1,(()=>{f=null})),V()),(!u||64&o)&&d!==(d=t[6].title+"")&&S(i,d),(!u||64&o&&l!==(l=t[6].link))&&N(r,"href",l),(!u||4&o)&&T(r,"color",t[2].titleBarTextColor),(!u||65&o)&&m!==(m=t[0].formatDate(t[6].date)+"")&&S(a,m),(!u||4&o)&&T(e,"color",t[2].titleBarTextColor),(!u||4&o)&&T(e,"background-color",t[2].titleBarColor),(!u||4&o)&&T(e,"border-bottom-color",t[2].frameColor)},i(t){u||(W(f),u=!0)},o(t){Y(f),u=!1},d(t){t&&b(e),f&&f.d()}}}function At(t){let e,n,o,r,i,l;return o=new $t({}),{c(){e=w("div"),n=w("a"),K(o.$$.fragment),N(n,"href",r=t[2].url),N(n,"title",i=t[6].format+" "+t[6].version),T(n,"color",t[2].titleBarTextColor),N(e,"class","rssbox-icon svelte-1muynra")},m(t,r){y(t,e,r),g(e,n),Z(o,n,null),l=!0},p(t,e){(!l||4&e&&r!==(r=t[2].url))&&N(n,"href",r),(!l||64&e&&i!==(i=t[6].format+" "+t[6].version))&&N(n,"title",i),(!l||4&e)&&T(n,"color",t[2].titleBarTextColor)},i(t){l||(W(o.$$.fragment,t),l=!0)},o(t){Y(o.$$.fragment,t),l=!1},d(t){t&&b(e),tt(o)}}}function Mt(t){let e,n,o={ctx:t,current:null,token:null,hasCatch:!1,pending:Dt,then:_t,catch:Rt,value:14};return G(n=Wt(t[6].image),o),{c(){e=E(),o.block.c()},m(t,n){y(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e},p(e,r){t=e,o.ctx=t,64&r&&n!==(n=Wt(t[6].image))&&G(n,o)||function(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)}(o,t,r)},d(t){t&&b(e),o.block.d(t),o.token=null,o=null}}}function Rt(t){return{c:a,m:a,p:a,d:a}}function _t(t){let e,n,o,r,i;return{c(){e=w("a"),n=w("div"),N(n,"alt",o=t[6].image.description),N(n,"class","rssbox-image svelte-1muynra"),T(n,"background-image","url("+t[6].image.source+")"),T(n,"width",t[14].width),T(n,"height",t[14].height),N(e,"href",r=t[6].image.link),N(e,"title",i=t[6].image.title),N(e,"class","svelte-1muynra")},m(t,o){y(t,e,o),g(e,n)},p(t,l){64&l&&o!==(o=t[6].image.description)&&N(n,"alt",o),64&l&&T(n,"background-image","url("+t[6].image.source+")"),64&l&&T(n,"width",t[14].width),64&l&&T(n,"height",t[14].height),64&l&&r!==(r=t[6].image.link)&&N(e,"href",r),64&l&&i!==(i=t[6].image.title)&&N(e,"title",i)},d(t){t&&b(e)}}}function Dt(t){return{c:a,m:a,p:a,d:a}}function Ot(t){let e,n,o,r=t[8].title&&Lt(t),i=!t[2].compact&&qt(t);return{c(){e=w("div"),r&&r.c(),n=C(),i&&i.c(),N(e,"class","rssbox-item-content rssBoxItemContent"),T(e,"color",t[2].textColor)},m(t,l){y(t,e,l),r&&r.m(e,null),g(e,n),i&&i.m(e,null),o=!0},p(t,l){t[8].title?r?r.p(t,l):(r=Lt(t),r.c(),r.m(e,n)):r&&(r.d(1),r=null),t[2].compact?i&&(Q(),Y(i,1,1,(()=>{i=null})),V()):i?(i.p(t,l),4&l&&W(i,1)):(i=qt(t),i.c(),W(i,1),i.m(e,null)),(!o||4&l)&&T(e,"color",t[2].textColor)},i(t){o||(W(i),o=!0)},o(t){Y(i),o=!1},d(t){t&&b(e),r&&r.d(),i&&i.d()}}}function Lt(t){let e,n;function o(t,e){return t[8].link?Ft:Pt}let r=o(t),i=r(t);return{c(){e=w("div"),i.c(),N(e,"class",n="rssbox-item-title "+t[3]+" svelte-1muynra")},m(t,n){y(t,e,n),i.m(e,null)},p(t,l){r===(r=o(t))&&i?i.p(t,l):(i.d(1),i=r(t),i&&(i.c(),i.m(e,null))),8&l&&n!==(n="rssbox-item-title "+t[3]+" svelte-1muynra")&&N(e,"class",n)},d(t){t&&b(e),i.d()}}}function Pt(t){let e,n,o=t[8].title+"";return{c(){e=new B(!1),n=E(),e.a=n},m(t,r){e.m(o,t,r),y(t,n,r)},p(t,n){64&n&&o!==(o=t[8].title+"")&&e.p(o)},d(t){t&&(b(n),e.d())}}}function Ft(t){let e,n,o=t[8].title+"";return{c(){e=w("a"),N(e,"href",n=t[8].link),N(e,"class","svelte-1muynra")},m(t,n){y(t,e,n),e.innerHTML=o},p(t,r){64&r&&o!==(o=t[8].title+"")&&(e.innerHTML=o),64&r&&n!==(n=t[8].link)&&N(e,"href",n)},d(t){t&&b(e)}}}function qt(t){let e,n,o,r,i,l,s=t[8].description+"",c=t[8].source&&It(t),a=t[8].enclosures&&Ht(t);return{c(){e=w("aside"),c&&c.c(),n=C(),a&&a.c(),o=C(),r=new B(!1),i=E(),N(e,"class","svelte-1muynra"),r.a=i},m(t,u){y(t,e,u),c&&c.m(e,null),g(e,n),a&&a.m(e,null),y(t,o,u),r.m(s,t,u),y(t,i,u),l=!0},p(t,o){t[8].source?c?(c.p(t,o),64&o&&W(c,1)):(c=It(t),c.c(),W(c,1),c.m(e,n)):c&&(Q(),Y(c,1,1,(()=>{c=null})),V()),t[8].enclosures?a?(a.p(t,o),64&o&&W(a,1)):(a=Ht(t),a.c(),W(a,1),a.m(e,null)):a&&(Q(),Y(a,1,1,(()=>{a=null})),V()),(!l||64&o)&&s!==(s=t[8].description+"")&&r.p(s)},i(t){l||(W(c),W(a),l=!0)},o(t){Y(c),Y(a),l=!1},d(t){t&&(b(e),b(o),b(i),r.d()),c&&c.d(),a&&a.d()}}}function It(t){let e,n,o,r,i,l,s;const c=[jt,Ut],a=[];function u(t,e){return 64&e&&(n=null),null==n&&(n=!!t[8].source.url.endsWith(".xml")),n?0:1}return o=u(t,-1),r=a[o]=c[o](t),{c(){e=w("a"),r.c(),N(e,"href",i=t[8].source.url),N(e,"title",l=t[8].source.title),N(e,"class","rssbox-source svelte-1muynra")},m(t,n){y(t,e,n),a[o].m(e,null),s=!0},p(t,n){let d=o;o=u(t,n),o!==d&&(Q(),Y(a[d],1,1,(()=>{a[d]=null})),V(),r=a[o],r||(r=a[o]=c[o](t),r.c()),W(r,1),r.m(e,null)),(!s||64&n&&i!==(i=t[8].source.url))&&N(e,"href",i),(!s||64&n&&l!==(l=t[8].source.title))&&N(e,"title",l)},i(t){s||(W(r),s=!0)},o(t){Y(r),s=!1},d(t){t&&b(e),a[o].d()}}}function Ut(t){let e,n;return e=new bt({}),{c(){K(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function jt(t){let e,n;return e=new $t({}),{c(){K(e.$$.fragment)},m(t,o){Z(e,t,o),n=!0},i(t){n||(W(e.$$.fragment,t),n=!0)},o(t){Y(e.$$.fragment,t),n=!1},d(t){tt(e,t)}}}function Ht(t){let e,n,o=J(t[8].enclosures),r=[];for(let e=0;e<o.length;e+=1)r[e]=zt(Tt(t,o,e));const i=t=>Y(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=E()},m(t,o){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,o);y(t,e,o),n=!0},p(t,n){if(192&n){let l;for(o=J(t[8].enclosures),l=0;l<o.length;l+=1){const i=Tt(t,o,l);r[l]?(r[l].p(i,n),W(r[l],1)):(r[l]=zt(i),r[l].c(),W(r[l],1),r[l].m(e.parentNode,e))}for(Q(),l=o.length;l<r.length;l+=1)i(l);V()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)W(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)Y(r[t]);n=!1},d(t){t&&b(e),x(r,t)}}}function zt(t){let e,n,o,r,i,l;return n=new Et({}),{c(){e=w("a"),K(n.$$.fragment),o=C(),N(e,"href",r=t[11].url),N(e,"title",i=t[7](t[11].length)+" "+t[11].type),N(e,"class","rssbox-enclosure svelte-1muynra")},m(t,r){y(t,e,r),Z(n,e,null),g(e,o),l=!0},p(t,n){(!l||64&n&&r!==(r=t[11].url))&&N(e,"href",r),(!l||64&n&&i!==(i=t[7](t[11].length)+" "+t[11].type))&&N(e,"title",i)},i(t){l||(W(n.$$.fragment,t),l=!0)},o(t){Y(n.$$.fragment,t),l=!1},d(t){t&&b(e),tt(n)}}}function Xt(t){let e,n,o=t[10]<t[2].maxItems&&Ot(t);return{c(){o&&o.c(),e=E()},m(t,r){o&&o.m(t,r),y(t,e,r),n=!0},p(t,n){t[10]<t[2].maxItems?o?(o.p(t,n),4&n&&W(o,1)):(o=Ot(t),o.c(),W(o,1),o.m(e.parentNode,e)):o&&(Q(),Y(o,1,1,(()=>{o=null})),V())},i(t){n||(W(o),n=!0)},o(t){Y(o),n=!1},d(t){t&&b(e),o&&o.d(t)}}}function Qt(t){let e,n,o,r,i;return{c(){e=w("form"),n=w("input"),N(n,"type","text"),N(n,"name",o=t[6].input.name),N(n,"placeholder","Enter search & hit return…"),N(n,"data-placeholder",r=t[6].input.description),N(n,"class","svelte-1muynra"),N(e,"class","rssbox-form svelte-1muynra"),N(e,"method","get"),N(e,"action",i=t[6].input.link)},m(t,o){y(t,e,o),g(e,n)},p(t,l){64&l&&o!==(o=t[6].input.name)&&N(n,"name",o),64&l&&r!==(r=t[6].input.description)&&N(n,"data-placeholder",r),64&l&&i!==(i=t[6].input.link)&&N(e,"action",i)},d(t){t&&b(e)}}}function Vt(t){let e,n,o,r,i,l,s,c,a,u,d,m=!t[2].headless&&Bt(t),f=t[6].image&&!t[2].compact&&Mt(t),h=J(t[6].items),p=[];for(let e=0;e<h.length;e+=1)p[e]=Xt(St(t,h,e));const v=t=>Y(p[t],1,1,(()=>{p[t]=null}));let $=t[6].input&&Qt(t);return{c(){e=w("div"),m&&m.c(),n=C(),o=w("div"),f&&f.c(),r=C();for(let t=0;t<p.length;t+=1)p[t].c();i=C(),$&&$.c(),l=C(),s=w("div"),c=w("a"),a=k("RSS Box by p3k.org"),N(c,"href",ct.app),T(c,"color",t[2].textColor),N(c,"class","svelte-1muynra"),N(s,"class","rssbox-promo rssBoxPromo svelte-1muynra"),N(o,"class","rssbox-content rssBoxContent svelte-1muynra"),T(o,"background-color",t[2].boxFillColor),T(o,"height",t[5]),N(e,"data-link-color",u=t[2].linkColor),N(e,"class","rssbox rssBox svelte-1muynra"),T(e,"max-width",t[4]),T(e,"border-color",t[2].frameColor),T(e,"border-radius",t[2].radius+"px"),T(e,"font",t[2].fontFace),T(e,"float",t[2].align)},m(t,u){y(t,e,u),m&&m.m(e,null),g(e,n),g(e,o),f&&f.m(o,null),g(o,r);for(let t=0;t<p.length;t+=1)p[t]&&p[t].m(o,null);g(o,i),$&&$.m(o,null),g(o,l),g(o,s),g(s,c),g(c,a),d=!0},p(t,[s]){if(t[2].headless?m&&(Q(),Y(m,1,1,(()=>{m=null})),V()):m?(m.p(t,s),4&s&&W(m,1)):(m=Bt(t),m.c(),W(m,1),m.m(e,n)),t[6].image&&!t[2].compact?f?f.p(t,s):(f=Mt(t),f.c(),f.m(o,r)):f&&(f.d(1),f=null),204&s){let e;for(h=J(t[6].items),e=0;e<h.length;e+=1){const n=St(t,h,e);p[e]?(p[e].p(n,s),W(p[e],1)):(p[e]=Xt(n),p[e].c(),W(p[e],1),p[e].m(o,i))}for(Q(),e=h.length;e<p.length;e+=1)v(e);V()}t[6].input?$?$.p(t,s):($=Qt(t),$.c(),$.m(o,l)):$&&($.d(1),$=null),(!d||4&s)&&T(c,"color",t[2].textColor),(!d||4&s)&&T(o,"background-color",t[2].boxFillColor),(!d||32&s)&&T(o,"height",t[5]),(!d||4&s&&u!==(u=t[2].linkColor))&&N(e,"data-link-color",u),(!d||16&s)&&T(e,"max-width",t[4]),(!d||4&s)&&T(e,"border-color",t[2].frameColor),(!d||4&s)&&T(e,"border-radius",t[2].radius+"px"),(!d||4&s)&&T(e,"font",t[2].fontFace),(!d||4&s)&&T(e,"float",t[2].align)},i(t){if(!d){W(m);for(let t=0;t<h.length;t+=1)W(p[t]);d=!0}},o(t){Y(m),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)Y(p[t]);d=!1},d(t){t&&b(e),m&&m.d(),f&&f.d(),x(p,t),$&&$.d()}}}function Wt(t){return new Promise((e=>{const n=new Image;n.onload=()=>{const t=Math.min(100,n.width),o=n.width>t?t/n.width:1;e({width:n.width*o+"px",height:n.height*o+"px"})},n.src=t.source}))}function Yt(t,e,n){let o,r,i,l,s,c=a,u=()=>(c(),c=p(h,(t=>n(2,l=t))),h),d=a,m=()=>(d(),d=p(f,(t=>n(6,s=t))),f);t.$$.on_destroy.push((()=>c())),t.$$.on_destroy.push((()=>d()));let{feed:f}=e;m();let{config:h}=e;var g;u(),g=()=>{const t="rssbox-static-stylesheet",e="rssbox-dynamic-stylesheet";let n=window[t],o=window[e];n||(n=document.createElement("link"),n.href=`${ct.app}/assets/box.css`,n.id=t,n.rel="stylesheet",document.head.appendChild(n)),o||(o=document.createElement("style"),o.id=e,document.head.appendChild(o)),h.subscribe((t=>{const e=t.linkColor;if(!e)return;let n=`.rssbox[data-link-color="${e}"] a {\n          color: ${e};\n        }`;o.innerHTML.indexOf(n)<0&&(o.innerHTML+=n)}))},R().$$.on_mount.push(g);return t.$$set=t=>{"feed"in t&&m(n(0,f=t.feed)),"config"in t&&u(n(1,h=t.config))},t.$$.update=()=>{4&t.$$.dirty&&n(5,o=l.height&&l.height>-1?`${l.height}px`:"100%"),4&t.$$.dirty&&n(4,r=l.width?`${l.width}px`:"100%"),4&t.$$.dirty&&n(3,i=l.compact?"":"bold")},[f,h,l,i,r,o,s,t=>`${(t/1e3).toFixed(2)} kB`]}class Gt extends ot{constructor(t){super(),nt(this,t,Yt,Vt,h,{feed:0,config:1},Nt)}}const Jt={align:"initial",boxFillColor:"#fff",compact:!1,fontFace:"inherit",frameColor:"#000",headless:!1,height:"",linkColor:"",maxItems:7,radius:0,showXmlButton:!1,textColor:"#000",titleBarColor:"#add8e6",titleBarTextColor:"#000",width:"200"},Kt=[...Object.keys(Jt),"url"];c((()=>{const t=function(t){var e=document.createElement("iframe");document.body.appendChild(e);var n=e.contentWindow[t];return document.body.removeChild(e),n}("Array").prototype.reduce,e=ct.app.replace(/^https?:/,""),n=Array.apply(null,document.querySelectorAll(`script[src*="${e}"]`)),o=[];if(n.forEach((e=>{const n=e.src.split("?")[1];if(!n)return;let r=(e=>{const n=e.split("&");return t.call(n,((t,e)=>{const[n,o]=e.split("=");return Kt.indexOf(n)>-1&&(t[n]=(t=>"true"===t||"false"!==t&&t)(decodeURIComponent(o))),t}),{})})(n);r.url||(r.url=ct.feed),r=Object.assign({},Jt,r);const i=pt(),l=mt({align:"initial",boxFillColor:"#ffead2",compact:!1,fontFace:"10pt sans-serif",frameColor:"#b3a28e",headless:!1,height:"",linkColor:"#2c7395",maxItems:7,radius:5,showXmlButton:!0,textColor:"#95412b",titleBarColor:"#90a8b3",titleBarTextColor:"#ffead2",url:"",width:""});l.set(r),i.fetch(r.url,i);const s=e.parentNode,c=document.createElement("div");s.insertBefore(c,e),new Gt({target:c,props:{feed:i,config:l}}),e.parentNode.removeChild(e),r.url!==ct.feed&&o.indexOf(r.url)<0&&o.push(r.url)})),location.href.indexOf(ct.app)<0){const t=JSON.stringify({feedUrls:o});fetch(`${ct.referrers}&url=${encodeURIComponent(location.href)}&metadata=${encodeURIComponent(t)}`)}}));
//# sourceMappingURL=box-esm.js.map
